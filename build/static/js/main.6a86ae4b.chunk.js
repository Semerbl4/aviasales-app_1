(this["webpackJsonpaviasales-app_0.1"]=this["webpackJsonpaviasales-app_0.1"]||[]).push([[0],{23:function(e,t,c){e.exports={"tabs-container":"Tabs_tabs-container__3Y2h5","tabs-buttons":"Tabs_tabs-buttons__3Vn2X","tabs-buttons_selected":"Tabs_tabs-buttons_selected__gfJ5N"}},26:function(e,t,c){e.exports={container:"App_container__3pHE7","tickets-info":"App_tickets-info__3fvnT","show-more":"App_show-more__3v1Xd",loader:"App_loader__20BGV"}},29:function(e,t,c){e.exports={"ticket-list":"TicketList_ticket-list__piWDb",infoNotif:"TicketList_infoNotif__2Xq38"}},5:function(e,t,c){e.exports={ticket:"Ticket_ticket__1U3TE",ticket__price:"Ticket_ticket__price__iMgjH","ticket__img-container":"Ticket_ticket__img-container__3VqbJ","ticket-item__param":"Ticket_ticket-item__param__2vbGa","ticket-item__value":"Ticket_ticket-item__value__2hExt"}},63:function(e,t,c){"use strict";c.r(t);var r={};c.r(r),c.d(r,"all",(function(){return y})),c.d(r,"none",(function(){return R})),c.d(r,"one",(function(){return S})),c.d(r,"two",(function(){return w})),c.d(r,"three",(function(){return I})),c.d(r,"cheap",(function(){return C})),c.d(r,"notCheap",(function(){return A})),c.d(r,"showMoreTickets",(function(){return D})),c.d(r,"setRestTicketsError",(function(){return F})),c.d(r,"setSearchIdError",(function(){return H})),c.d(r,"setTicketsError",(function(){return L})),c.d(r,"setSearchId",(function(){return K})),c.d(r,"setTickets",(function(){return M})),c.d(r,"setRestTickets",(function(){return W})),c.d(r,"getSearchId",(function(){return X})),c.d(r,"getTickets",(function(){return P})),c.d(r,"getRestTickets",(function(){return B}));var n=c(1),s=c(0),a=c(21),i=c.n(a),o=c(11),l=c(37),u=c(10),h=c(22),_={checkAll:!0,check0:!0,check1:!0,check2:!0,check3:!0},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,c=Object(h.a)({},e);switch(!0){case"ALL"===t.type&&c.checkAll:for(var r in c)r&&(c[r]=!1);return c;case"ALL"===t.type:for(var n in c)n&&(c[n]=!0);return c;case"NONE"===t.type:return c.checkAll=!1,c.check0=!c.check0,c;case"ONE"===t.type:return c.checkAll=!1,c.check1=!c.check1,c;case"TWO"===t.type:return c.checkAll=!1,c.check2=!c.check2,c;case"THREE"===t.type:return c.checkAll=!1,c.check3=!c.check3,c;default:return e}},b=c(13),d={moreTicketsToLoad:!0,ticketsToShow:10,searchId:null,tickets:[],tabCheap:!0},p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,c=arguments.length>1?arguments[1]:void 0,r=Object(h.a)({},t);switch(!0){case"SHOW_MORE_TICKETS"===c.type:return r.ticketsToShow+=5,r;case"REST_TICKETS"===c.type:return(e=r.tickets).push.apply(e,Object(b.a)(c.payload)),r.moreTicketsToLoad=!1,r;case"TICKETS"===c.type:return r.tickets=c.payload,r;case"SEARCH_ID"===c.type:return r.searchId=c.payload,r;case"CHEAP"===c.type:return r.tabCheap=!0,r;case"NOT_CHEAP"===c.type:return r.tabCheap=!1,r;default:return t}},j={ticketsError:!1,moreTicketsError:!1,searchIdError:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,c=Object(h.a)({},e);switch(!0){case"SET_TICKETS_ERROR"===t.type:return c.ticketsError=!0,c;case"SET_SEARCH_ID_ERROR"===t.type:return c.searchIdError=!0,c;case"GET_REST_TICKETS_ERROR"===t.type:return c.moreTicketsError=!0,c;default:return e}},m=Object(o.c)({mainReducer:p,filter:k,errorsReducer:f}),O=(c(61),c(65)),x=c(26),T=c.n(x),E=c(20),g=c.n(E),N=c(28),v=c(36),y=function(){return{type:"ALL"}},R=function(){return{type:"NONE"}},S=function(){return{type:"ONE"}},w=function(){return{type:"TWO"}},I=function(){return{type:"THREE"}},C=function(){return{type:"CHEAP"}},A=function(){return{type:"NOT_CHEAP"}},D=function(){return{type:"SHOW_MORE_TICKETS"}},F=function(){return{type:"GET_REST_TICKETS_ERROR"}},H=function(){return{type:"SET_SEARCH_ID_ERROR"}},L=function(){return{type:"SET_TICKETS_ERROR"}},K=function(e){return{type:"SEARCH_ID",payload:e}},M=function(e){return{type:"TICKETS",payload:e}},W=function(e){return{type:"REST_TICKETS",payload:e}},X=function(){return function(){var e=Object(N.a)(g.a.mark((function e(t){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:if(!(c=e.sent).ok){e.next=9;break}return e.next=6,c.json();case 6:return c=e.sent,t(K(c.searchId)),e.abrupt("return",c.searchId);case 9:t(H());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(N.a)(g.a.mark((function t(c){var r,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 2:if(!(r=t.sent).ok){t.next=11;break}return t.next=6,r.json();case 6:r=t.sent,n=r.tickets.map((function(e){return e.id=Object(v.a)(),e})),c(M(n)),t.next=12;break;case 11:c(L());case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(N.a)(g.a.mark((function t(c){var r,n,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=!1;case 2:if(!0===n){t.next=20;break}return t.next=5,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 5:if(!(s=t.sent).ok){t.next=16;break}if(!0!==s.stop){t.next=9;break}return t.abrupt("break",20);case 9:return t.next=11,s.json();case 11:s=(s=t.sent).tickets.map((function(e){return e.id=Object(v.a)(),e})),r.push.apply(r,Object(b.a)(s)),t.next=18;break;case 16:return c(F()),t.abrupt("break",20);case 18:t.next=2;break;case 20:c(W(r));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},V=c(18),G=c(8),J=c.n(G),U=c(23),q=c.n(U),Q=Object(u.b)((function(e){return{tabCheap:e.mainReducer.tabCheap}}),r)((function(e){var t=e.tabCheap,c=e.cheap,r=e.notCheap,s=J()(q.a["tabs-buttons"],Object(V.a)({},q.a["tabs-buttons_selected"],t)),a=J()(q.a["tabs-buttons"],Object(V.a)({},q.a["tabs-buttons_selected"],!t));return Object(n.jsxs)("div",{className:q.a["tabs-container"],children:[Object(n.jsx)("button",{className:s,type:"button",onClick:c,children:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0401\u0412\u042b\u0419"}),Object(n.jsx)("button",{className:a,type:"button",onClick:r,children:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"})]})})),Y=c(29),z=c.n(Y),Z=c(5),$=c.n(Z),ee=function(e){var t=e.ticketToData,c=e.ticketFromData,r=e.price,s=e.carrier,a=function(e){return e<10?"0".concat(e):e},i=function(e){var t=e/60,c=Math.floor(t),r=60*(t-c),n=Math.round(r);return"".concat(a(c),"\u0447 ").concat(a(n),"\u043c")},o=function(e){return 1===e.length?"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":0===e.length?"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},l=function(e,t){var c=new Date(e).getHours(),r=new Date(e).getMinutes(),n=Date.parse(new Date(e))+1e3*t*60,s=new Date(n).getHours(),i=new Date(n).getMinutes();return"".concat(a(c),":").concat(a(r)," - ").concat(a(s),":").concat(a(i))};return Object(n.jsxs)("ul",{className:$.a.ticket,type:"none",children:[Object(n.jsx)("li",{className:$.a.ticket__price,children:Object(n.jsx)("p",{children:"".concat(r," \u0420")})}),Object(n.jsx)("li",{className:$.a["ticket__img-container"],children:Object(n.jsx)("img",{className:$.a.ticket__img,src:"https://pics.avs.io/99/36/".concat(s,".png"),alt:s})}),Object(n.jsxs)("li",{className:$.a["ticket-item"],children:[Object(n.jsx)("p",{className:$.a["ticket-item__param"],children:t.toAndFrom}),Object(n.jsx)("p",{className:$.a["ticket-item__value"],children:l(t.date,t.timeToFly)})]}),Object(n.jsxs)("li",{className:$.a["ticket-item"],children:[Object(n.jsx)("p",{className:$.a["ticket-item__param"],children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(n.jsx)("p",{className:$.a["ticket-item__value"],children:i(t.timeToFly)})]}),Object(n.jsxs)("li",{className:$.a["ticket-item"],children:[Object(n.jsx)("p",{className:$.a["ticket-item__param"],children:"".concat(t.transfers.length," ").concat(o(t.transfers))}),Object(n.jsx)("p",{className:$.a["ticket-item__value"],children:t.transfers.join(", ")})]}),Object(n.jsxs)("li",{className:$.a["ticket-item"],children:[Object(n.jsx)("p",{className:$.a["ticket-item__param"],children:c.toAndFrom}),Object(n.jsx)("p",{className:$.a["ticket-item__value"],children:l(c.date,c.timeToFly)})]}),Object(n.jsxs)("li",{className:$.a["ticket-item"],children:[Object(n.jsx)("p",{className:$.a["ticket-item__param"],children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(n.jsx)("p",{className:$.a["ticket-item__value"],children:i(c.timeToFly)})]}),Object(n.jsxs)("li",{className:$.a["ticket-item"],children:[Object(n.jsx)("p",{className:$.a["ticket-item__param"],children:"".concat(c.transfers.length," ").concat(o(c.transfers))}),Object(n.jsx)("p",{className:$.a["ticket-item__value"],children:c.transfers.join(",")})]})]})},te=Object(u.b)((function(e){return{tickets:e.mainReducer.tickets,checkAll:e.filter.checkAll,check0:e.filter.check0,check1:e.filter.check1,check2:e.filter.check2,check3:e.filter.check3,tabCheap:e.mainReducer.tabCheap,ticketsToShow:e.mainReducer.ticketsToShow}}))((function(e){var t=e.tickets,c=e.checkAll,r=e.check0,s=e.check1,a=e.check2,i=e.check3,o=e.tabCheap,l=e.ticketsToShow,u=function(e){var t=e.toString();if(+t>=1e5){var c=(t=t.split("")).splice(0,3);return(t=[].concat(Object(b.a)(c),[" "],Object(b.a)(t))).join("")}if(+t>=1e4){var r=(t=t.split("")).splice(0,2);return(t=[].concat(Object(b.a)(r),[" "],Object(b.a)(t))).join("")}return e};return Object(n.jsx)("ul",{className:z.a["ticket-list"],type:"none",children:function(e){o&&t.sort((function(e,t){return e.price-t.price})),o||t.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)}));var l=t.filter((function(e){return[c,r?0:null,s?1:null,a?2:null,i?3:null].reduce((function(t,c){return!0===c&&!1===t?t=c:0===c&&!1===t||1===c&&!1===t||2===c&&!1===t||3===c&&!1===t?t=e.segments[0].stops.length===c&&e.segments[1].stops.length===c:t}),!1)}));return 0===(l=l.map((function(e){var t={carier:e.carrier,id:e.id,price:u(e.price),ticketToData:{toAndFrom:"".concat(e.segments[0].origin," \u2014 ").concat(e.segments[0].destination),date:e.segments[0].date,timeToFly:e.segments[0].duration,transfers:e.segments[0].stops},ticketFromData:{toAndFrom:"".concat(e.segments[1].origin," \u2014 ").concat(e.segments[1].destination),date:e.segments[0].date,timeToFly:e.segments[1].duration,transfers:e.segments[1].stops}};return Object(n.jsx)("li",{className:z.a["ticket-list__item"],children:Object(n.jsx)(ee,{carrier:t.carier,ticketToData:t.ticketToData,ticketFromData:t.ticketFromData,price:t.price})},t.id)})).slice(0,e)).length?Object(n.jsx)("li",{children:Object(n.jsx)(O.a,{className:z.a.infoNotif,message:"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",type:"info",showIcon:!0})}):l}(l)})})),ce=c(7),re=c.n(ce),ne=Object(u.b)((function(e){return{checkAll:e.filter.checkAll,check0:e.filter.check0,check1:e.filter.check1,check2:e.filter.check2,check3:e.filter.check3}}),r)((function(e){var t=e.checkAll,c=e.check0,r=e.check1,s=e.check2,a=e.check3,i=e.all,o=e.none,l=e.one,u=e.two,h=e.three,_=function(e){return J()(re.a["filters__visible-check"],Object(V.a)({},re.a["filters__visible-checked"],e))};return Object(n.jsx)("form",{className:re.a.filters,children:Object(n.jsxs)("fieldset",{className:re.a.filters__set,children:[Object(n.jsx)("legend",{className:re.a["filters__set-title"],children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(n.jsxs)("label",{className:re.a["filters__check-label"],children:[Object(n.jsx)("input",{className:re.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:i}),Object(n.jsx)("span",{className:_(t)}),Object(n.jsx)("p",{children:"\u0412\u0441\u0435"})]}),Object(n.jsxs)("label",{className:re.a["filters__check-label"],children:[Object(n.jsx)("input",{className:re.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:o}),Object(n.jsx)("span",{className:_(c)}),Object(n.jsx)("p",{children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})]}),Object(n.jsxs)("label",{className:re.a["filters__check-label"],children:[Object(n.jsx)("input",{className:re.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:l}),Object(n.jsx)("span",{className:_(r)}),Object(n.jsx)("p",{children:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})]}),Object(n.jsxs)("label",{className:re.a["filters__check-label"],children:[Object(n.jsx)("input",{className:re.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:u}),Object(n.jsx)("span",{className:_(s)}),Object(n.jsx)("p",{children:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]}),Object(n.jsxs)("label",{className:re.a["filters__check-label"],children:[Object(n.jsx)("input",{className:re.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:h}),Object(n.jsx)("span",{className:_(a)}),Object(n.jsx)("p",{children:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]})]})})})),se=c.p+"static/media/Logo.8bb77c6b.svg",ae=c.p+"static/media/Pulse-1.4s-151px.2aac8809.gif",ie=Object(u.b)((function(e){return{moreTicketsToLoad:e.mainReducer.moreTicketsToLoad,moreTicketsError:e.errorsReducer.moreTicketsError,searchIdError:e.errorsReducer.searchIdError,ticketsError:e.errorsReducer.ticketsError,tickets:e.mainReducer.tickets,checkBoxes:e.filter}}),(function(e){var t=Object(o.b)(r,e);return{getSearchId:t.getSearchId,getTickets:t.getTickets,getRestTickets:t.getRestTickets,showMoreTickets:t.showMoreTickets}}))((function(e){var t=e.getSearchId,c=e.getTickets,r=e.getRestTickets,a=e.showMoreTickets,i=e.moreTicketsToLoad,o=e.moreTicketsError,l=e.searchIdError,u=e.ticketsError,h=e.checkBoxes;Object(s.useEffect)((function(){t().then((function(e){c(e),r(e)}))}),[]);return Object(n.jsxs)("div",{className:T.a.container,children:[Object(n.jsx)("header",{children:Object(n.jsx)("img",{className:"logo",src:se,alt:"\u0410\u0432\u0438\u0430\u0441\u044d\u0439\u043b\u0441 \u043b\u043e\u0433\u043e"})}),l?Object(n.jsx)(O.a,{message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c ID \u043f\u043e\u0438\u0441\u043a\u0430 \u0441 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",type:"error",showIcon:!0,closable:!0}):Object(n.jsxs)("main",{children:[Object(n.jsx)(ne,{}),Object(n.jsxs)("section",{className:T.a["tickets-info"],children:[Object(n.jsx)(Q,{}),u?Object(n.jsx)(O.a,{message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",type:"error",showIcon:!0,closable:!0}):Object(n.jsx)(te,{}),i?Object(n.jsx)("img",{src:ae,alt:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0431\u0438\u043b\u0435\u0442\u043e\u0432",className:T.a.loader}):Object(n.jsx)("button",{className:T.a["show-more"],type:"button",onClick:a,children:"\u041f\u041e\u041a\u0410\u0417\u0410\u0422\u042c \u0415\u0429\u0401"}),o&&Object.values(h).includes(!0)&&Object(n.jsx)(O.a,{message:"\u042d\u0442\u043e \u0432\u0441\u0435 \u0431\u0438\u043b\u0435\u0442\u044b, \u0447\u0442\u043e \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e \u043e\u0448\u0438\u0431\u043a\u0438",type:"warning",showIcon:!0,closable:!0})]})]})]})})),oe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,le=Object(o.e)(m,oe(Object(o.a)(l.a)));console.log(le.getState()),i.a.render(Object(n.jsx)(u.a,{store:le,children:Object(n.jsx)(ie,{})}),document.getElementById("root"))},7:function(e,t,c){e.exports={filters:"Filters_filters__3XegU",filters__set:"Filters_filters__set__2IvWl","filters__set-title":"Filters_filters__set-title__QX4si","filters__check-label":"Filters_filters__check-label__3KK2B","filters__hidden-box":"Filters_filters__hidden-box__2etet","filters__visible-check":"Filters_filters__visible-check__SVvoW","filters__visible-checked":"Filters_filters__visible-checked__3jinE"}}},[[63,1,2]]]);
//# sourceMappingURL=main.6a86ae4b.chunk.js.map