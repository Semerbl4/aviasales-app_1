(this["webpackJsonpaviasales-app_0.1"]=this["webpackJsonpaviasales-app_0.1"]||[]).push([[0],{22:function(e,t,c){e.exports={"tabs-container":"Tabs_tabs-container__3Y2h5","tabs-buttons":"Tabs_tabs-buttons__3Vn2X","tabs-buttons_selected":"Tabs_tabs-buttons_selected__gfJ5N"}},25:function(e,t,c){e.exports={container:"App_container__3pHE7","tickets-info":"App_tickets-info__3fvnT","show-more":"App_show-more__3v1Xd",loader:"App_loader__20BGV"}},31:function(e,t,c){e.exports={"ticket-list":"TicketList_ticket-list__piWDb"}},5:function(e,t,c){e.exports={ticket:"Ticket_ticket__1U3TE",ticket__price:"Ticket_ticket__price__iMgjH","ticket__img-container":"Ticket_ticket__img-container__3VqbJ","ticket-item__param":"Ticket_ticket-item__param__2vbGa","ticket-item__value":"Ticket_ticket-item__value__2hExt"}},62:function(e,t,c){"use strict";c.r(t);var r={};c.r(r),c.d(r,"all",(function(){return T})),c.d(r,"none",(function(){return E})),c.d(r,"one",(function(){return g})),c.d(r,"two",(function(){return y})),c.d(r,"three",(function(){return N})),c.d(r,"cheap",(function(){return v})),c.d(r,"notCheap",(function(){return S})),c.d(r,"showMoreTickets",(function(){return C})),c.d(r,"setRestTicketsError",(function(){return I})),c.d(r,"setSearchIdError",(function(){return R})),c.d(r,"setTicketsError",(function(){return w})),c.d(r,"setSearchId",(function(){return A})),c.d(r,"setTickets",(function(){return D})),c.d(r,"setRestTickets",(function(){return F})),c.d(r,"getSearchId",(function(){return H})),c.d(r,"getTickets",(function(){return L})),c.d(r,"getRestTickets",(function(){return K}));var s=c(1),a=c(0),n=c(21),i=c.n(n),l=c(17),o=c(36),u=c(10),h=c(12),k=c(38),_={filter:{checkAll:!0,check0:!0,check1:!0,check2:!0,check3:!0},moreTicketsToLoad:!0,ticketsError:!1,moreTicketsError:!1,searchIdError:!1,ticketsToShow:10,searchId:null,tickets:[],tabCheap:!0},b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,c=arguments.length>1?arguments[1]:void 0,r=Object(k.a)({},t);switch(!0){case"SET_TICKETS_ERROR"===c.type:return r.ticketsError=!0,r;case"SET_SEARCH_ID_ERROR"===c.type:return r.searchIdError=!0,r;case"GET_REST_TICKETS_ERROR"===c.type:return r.moreTicketsError=!0,r;case"SHOW_MORE_TICKETS"===c.type:return r.ticketsToShow+=5,r;case"REST_TICKETS"===c.type:return(e=r.tickets).push.apply(e,Object(h.a)(c.payload)),r.moreTicketsToLoad=!1,r;case"TICKETS"===c.type:return r.tickets=c.payload,r;case"SEARCH_ID"===c.type:return r.searchId=c.payload,r;case"ALL"===c.type&&r.filter.checkAll:for(var s in r.filter)s&&(r.filter[s]=!1);return r;case"ALL"===c.type:for(var a in r.filter)a&&(r.filter[a]=!0);return r;case"NONE"===c.type:return r.filter.checkAll=!1,r.filter.check0=!r.filter.check0,r;case"ONE"===c.type:return r.filter.checkAll=!1,r.filter.check1=!r.filter.check1,r;case"TWO"===c.type:return r.filter.checkAll=!1,r.filter.check2=!r.filter.check2,r;case"THREE"===c.type:return r.filter.checkAll=!1,r.filter.check3=!r.filter.check3,r;case"CHEAP"===c.type:return r.tabCheap=!0,r;case"NOT_CHEAP"===c.type:return r.tabCheap=!1,r;default:return t}},f=(c(60),c(65)),p=c(25),d=c.n(p),j=c(20),m=c.n(j),O=c(27),x=c(35),T=function(){return{type:"ALL"}},E=function(){return{type:"NONE"}},g=function(){return{type:"ONE"}},y=function(){return{type:"TWO"}},N=function(){return{type:"THREE"}},v=function(){return{type:"CHEAP"}},S=function(){return{type:"NOT_CHEAP"}},C=function(){return{type:"SHOW_MORE_TICKETS"}},I=function(){return{type:"GET_REST_TICKETS_ERROR"}},R=function(){return{type:"SET_SEARCH_ID_ERROR"}},w=function(){return{type:"SET_TICKETS_ERROR"}},A=function(e){return{type:"SEARCH_ID",payload:e}},D=function(e){return{type:"TICKETS",payload:e}},F=function(e){return{type:"REST_TICKETS",payload:e}},H=function(){return function(){var e=Object(O.a)(m.a.mark((function e(t){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:if(!(c=e.sent).ok){e.next=9;break}return e.next=6,c.json();case 6:return c=e.sent,t(A(c.searchId)),e.abrupt("return",c.searchId);case 9:t(R());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(O.a)(m.a.mark((function t(c){var r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 2:if(!(r=t.sent).ok){t.next=11;break}return t.next=6,r.json();case 6:r=t.sent,s=r.tickets.map((function(e){return e.id=Object(x.a)(),e})),c(D(s)),t.next=12;break;case 11:c(w());case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(e){return function(){var t=Object(O.a)(m.a.mark((function t(c){var r,s,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],s=!1;case 2:if(!0===s){t.next=20;break}return t.next=5,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 5:if(!(a=t.sent).ok){t.next=16;break}if(!0!==a.stop){t.next=9;break}return t.abrupt("break",20);case 9:return t.next=11,a.json();case 11:a=(a=t.sent).tickets.map((function(e){return e.id=Object(x.a)(),e})),r.push.apply(r,Object(h.a)(a)),t.next=18;break;case 16:return c(I()),t.abrupt("break",20);case 18:t.next=2;break;case 20:c(F(r));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=c(18),W=c(8),P=c.n(W),X=c(22),V=c.n(X),G=Object(u.b)((function(e){return{tabCheap:e.tabCheap}}),r)((function(e){var t=e.tabCheap,c=e.cheap,r=e.notCheap,a=P()(V.a["tabs-buttons"],Object(M.a)({},V.a["tabs-buttons_selected"],t)),n=P()(V.a["tabs-buttons"],Object(M.a)({},V.a["tabs-buttons_selected"],!t));return Object(s.jsxs)("div",{className:V.a["tabs-container"],children:[Object(s.jsx)("button",{className:a,type:"button",onClick:c,children:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0401\u0412\u042b\u0419"}),Object(s.jsx)("button",{className:n,type:"button",onClick:r,children:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"})]})})),J=c(31),B=c.n(J),U=c(5),q=c.n(U),Q=function(e){var t=e.ticketToData,c=e.ticketFromData,r=e.price,a=e.carrier,n=function(e){return e<10?"0".concat(e):e},i=function(e){var t=e/60,c=Math.floor(t),r=60*(t-c),s=Math.round(r);return"".concat(n(c),"\u0447 ").concat(n(s),"\u043c")},l=function(e){return 1===e.length?"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":0===e.length?"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},o=function(e,t){var c=new Date(e).getHours(),r=new Date(e).getMinutes(),s=Date.parse(new Date(e))+1e3*t*60,a=new Date(s).getHours(),i=new Date(s).getMinutes();return"".concat(n(c),":").concat(n(r)," - ").concat(n(a),":").concat(n(i))};return Object(s.jsxs)("ul",{className:q.a.ticket,type:"none",children:[Object(s.jsx)("li",{className:q.a.ticket__price,children:Object(s.jsx)("p",{children:"".concat(r," \u0420")})}),Object(s.jsx)("li",{className:q.a["ticket__img-container"],children:Object(s.jsx)("img",{className:q.a.ticket__img,src:"https://pics.avs.io/99/36/".concat(a,".png"),alt:a})}),Object(s.jsxs)("li",{className:q.a["ticket-item"],children:[Object(s.jsx)("p",{className:q.a["ticket-item__param"],children:t.toAndFrom}),Object(s.jsx)("p",{className:q.a["ticket-item__value"],children:o(t.date,t.timeToFly)})]}),Object(s.jsxs)("li",{className:q.a["ticket-item"],children:[Object(s.jsx)("p",{className:q.a["ticket-item__param"],children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(s.jsx)("p",{className:q.a["ticket-item__value"],children:i(t.timeToFly)})]}),Object(s.jsxs)("li",{className:q.a["ticket-item"],children:[Object(s.jsx)("p",{className:q.a["ticket-item__param"],children:"".concat(t.transfers.length," ").concat(l(t.transfers))}),Object(s.jsx)("p",{className:q.a["ticket-item__value"],children:t.transfers.join(", ")})]}),Object(s.jsxs)("li",{className:q.a["ticket-item"],children:[Object(s.jsx)("p",{className:q.a["ticket-item__param"],children:c.toAndFrom}),Object(s.jsx)("p",{className:q.a["ticket-item__value"],children:o(c.date,c.timeToFly)})]}),Object(s.jsxs)("li",{className:q.a["ticket-item"],children:[Object(s.jsx)("p",{className:q.a["ticket-item__param"],children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(s.jsx)("p",{className:q.a["ticket-item__value"],children:i(c.timeToFly)})]}),Object(s.jsxs)("li",{className:q.a["ticket-item"],children:[Object(s.jsx)("p",{className:q.a["ticket-item__param"],children:"".concat(c.transfers.length," ").concat(l(c.transfers))}),Object(s.jsx)("p",{className:q.a["ticket-item__value"],children:c.transfers.join(",")})]})]})},Y=Object(u.b)((function(e){return{tickets:e.tickets,checkAll:e.filter.checkAll,check0:e.filter.check0,check1:e.filter.check1,check2:e.filter.check2,check3:e.filter.check3,tabCheap:e.tabCheap,ticketsToShow:e.ticketsToShow}}))((function(e){var t=e.tickets,c=e.checkAll,r=e.check0,a=e.check1,n=e.check2,i=e.check3,l=e.tabCheap,o=e.ticketsToShow,u=function(e){var t=e.toString();if(+t>=1e5){var c=(t=t.split("")).splice(0,3);return(t=[].concat(Object(h.a)(c),[" "],Object(h.a)(t))).join("")}if(+t>=1e4){var r=(t=t.split("")).splice(0,2);return(t=[].concat(Object(h.a)(r),[" "],Object(h.a)(t))).join("")}return e};return Object(s.jsx)("ul",{className:B.a["ticket-list"],type:"none",children:(l&&t.sort((function(e,t){return e.price-t.price})),l||t.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)})),t.map((function(e){var t={carier:e.carrier,id:e.id,price:u(e.price),ticketToData:{toAndFrom:"".concat(e.segments[0].origin," - ").concat(e.segments[0].destination),date:e.segments[0].date,timeToFly:e.segments[0].duration,transfers:e.segments[0].stops},ticketFromData:{toAndFrom:"".concat(e.segments[1].origin," - ").concat(e.segments[1].destination),date:e.segments[0].date,timeToFly:e.segments[1].duration,transfers:e.segments[1].stops}},l=Object(s.jsx)("li",{className:B.a["ticket-list__item"],children:Object(s.jsx)(Q,{carrier:t.carier,ticketToData:t.ticketToData,ticketFromData:t.ticketFromData,price:t.price})},t.id);return c||r&&0===t.ticketToData.transfers.length&&0===t.ticketFromData.transfers.length||a&&1===t.ticketToData.transfers.length&&1===t.ticketFromData.transfers.length||n&&2===t.ticketToData.transfers.length&&2===t.ticketFromData.transfers.length||i&&3===t.ticketToData.transfers.length&&3===t.ticketFromData.transfers.length?l:null}))).splice(0,o)})})),z=c(7),Z=c.n(z),$=Object(u.b)((function(e){return{checkAll:e.filter.checkAll,check0:e.filter.check0,check1:e.filter.check1,check2:e.filter.check2,check3:e.filter.check3}}),r)((function(e){var t=e.checkAll,c=e.check0,r=e.check1,a=e.check2,n=e.check3,i=e.all,l=e.none,o=e.one,u=e.two,h=e.three,k=function(e){return P()(Z.a["filters__visible-check"],Object(M.a)({},Z.a["filters__visible-checked"],e))};return Object(s.jsx)("form",{className:Z.a.filters,children:Object(s.jsxs)("fieldset",{className:Z.a.filters__set,children:[Object(s.jsx)("legend",{className:Z.a["filters__set-title"],children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(s.jsxs)("label",{className:Z.a["filters__check-label"],children:[Object(s.jsx)("input",{className:Z.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:i}),Object(s.jsx)("span",{className:k(t)}),Object(s.jsx)("p",{children:"\u0412\u0441\u0435"})]}),Object(s.jsxs)("label",{className:Z.a["filters__check-label"],children:[Object(s.jsx)("input",{className:Z.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:l}),Object(s.jsx)("span",{className:k(c)}),Object(s.jsx)("p",{children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})]}),Object(s.jsxs)("label",{className:Z.a["filters__check-label"],children:[Object(s.jsx)("input",{className:Z.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:o}),Object(s.jsx)("span",{className:k(r)}),Object(s.jsx)("p",{children:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})]}),Object(s.jsxs)("label",{className:Z.a["filters__check-label"],children:[Object(s.jsx)("input",{className:Z.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:u}),Object(s.jsx)("span",{className:k(a)}),Object(s.jsx)("p",{children:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]}),Object(s.jsxs)("label",{className:Z.a["filters__check-label"],children:[Object(s.jsx)("input",{className:Z.a["filters__hidden-box"],type:"checkbox",name:"all",id:"",onClick:h}),Object(s.jsx)("span",{className:k(n)}),Object(s.jsx)("p",{children:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]})]})})})),ee=c.p+"static/media/Logo.8bb77c6b.svg",te=c.p+"static/media/Pulse-1.4s-151px.2aac8809.gif",ce=Object(u.b)((function(e){return{moreTicketsToLoad:e.moreTicketsToLoad,moreTicketsError:e.moreTicketsError,searchIdError:e.searchIdError,ticketsError:e.ticketsError,tickets:e.tickets}}),(function(e){var t=Object(l.b)(r,e);return{getSearchId:t.getSearchId,getTickets:t.getTickets,getRestTickets:t.getRestTickets,showMoreTickets:t.showMoreTickets}}))((function(e){var t=e.getSearchId,c=e.getTickets,r=e.getRestTickets,n=e.showMoreTickets,i=e.moreTicketsToLoad,l=e.moreTicketsError,o=e.searchIdError,u=e.ticketsError;return Object(a.useEffect)((function(){t().then((function(e){c(e),r(e)}))}),[]),Object(s.jsxs)("div",{className:d.a.container,children:[Object(s.jsx)("header",{children:Object(s.jsx)("img",{className:"logo",src:ee,alt:"\u0410\u0432\u0438\u0430\u0441\u044d\u0439\u043b\u0441 \u043b\u043e\u0433\u043e"})}),o?Object(s.jsx)(f.a,{message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c ID \u043f\u043e\u0438\u0441\u043a\u0430 \u0441 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",type:"error",showIcon:!0,closable:!0}):Object(s.jsxs)("main",{children:[Object(s.jsx)($,{}),Object(s.jsxs)("section",{className:d.a["tickets-info"],children:[Object(s.jsx)(G,{}),u?Object(s.jsx)(f.a,{message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",type:"error",showIcon:!0,closable:!0}):Object(s.jsx)(Y,{}),i?Object(s.jsx)("img",{src:te,alt:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0431\u0438\u043b\u0435\u0442\u043e\u0432",className:d.a.loader}):Object(s.jsx)("button",{className:d.a["show-more"],type:"button",onClick:n,children:"\u041f\u041e\u041a\u0410\u0417\u0410\u0422\u042c \u0415\u0429\u0401"}),l&&Object(s.jsx)(f.a,{message:"\u042d\u0442\u043e \u0432\u0441\u0435 \u0431\u0438\u043b\u0435\u0442\u044b, \u0447\u0442\u043e \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e \u043e\u0448\u0438\u0431\u043a\u0438",type:"warning",showIcon:!0,closable:!0})]})]})]})})),re="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,se=Object(l.d)(b,re(Object(l.a)(o.a)));i.a.render(Object(s.jsx)(u.a,{store:se,children:Object(s.jsx)(ce,{})}),document.getElementById("root"))},7:function(e,t,c){e.exports={filters:"Filters_filters__3XegU",filters__set:"Filters_filters__set__2IvWl","filters__set-title":"Filters_filters__set-title__QX4si","filters__check-label":"Filters_filters__check-label__3KK2B","filters__hidden-box":"Filters_filters__hidden-box__2etet","filters__visible-check":"Filters_filters__visible-check__SVvoW","filters__visible-checked":"Filters_filters__visible-checked__3jinE"}}},[[62,1,2]]]);
//# sourceMappingURL=main.f5b36146.chunk.js.map